# Store Package
This package contains the implementation of a good part of the kernel, in particular it contains the implementation of the database buffer pool. <br> <br>
![tesi](https://github.com/user-attachments/assets/c5e46d3c-c74a-46ed-9ed2-8bc2b643c2c8)
The buffer pool consists of the following modules: 
* Address Binder
* Cache Page
* Buffer Pool
* Hash Function
* Storage API
### Address Binder
This module is responsible for translating hash functions into indexes, so you can map the entries in the array of pages contained in the buffer pool <br>
```Go
func (a *AddressBinder) TranslateHash(hash uint32) uint32 {
	a.bucketAddress = hash % BUFFER_POOL_SIZE
	return a.bucketAddress
}
```
This piece of code translates the value generated by the hash function into an index for an array.
### Cache Page
This module contains the implementation of pages. A page indicates only one bucket of a hash map, however due to the possibility of collisions a linked list is implemented to manage the collisions. Hence each bucket is placed in the managed linked list of the page itself. <br>
Buckets are composed of an array of bytes with a maximum size of 2KB. Buckets can store only a pair of K-V, the key is separated from the value through the character @, this will make the research phase easier. <br><br>
![page](https://github.com/user-attachments/assets/ac6a0b10-2220-4329-9cd5-9798b62ba117)
Note that each bucket contains not only the data part but also the logical clock which will use the page replacement algorithm
```Go
type Bucket struct {
	bucketData    [PAGE_SIZE]byte
	knucklesClock int
}
```
### Buffer Pool
The buffer pool is implemented as an array of 3000 elements, with each element in the array representing a page and, more specifically, a single bucket. However, due to possible collisions, each page may contain a list of buckets, which degrades overall performance. <br> <br>
It is possible to manipulate the buffer pool by adding and removing buckets through the methods provided by the BufferPool class. These methods must be invoked by the KnucklesMap class.
Those are: 
* WritePage
* ReadPage
* EvictPage, which only the paginator can call.
